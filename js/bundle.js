var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();!function(){function t(e,n,a){function o(i,s){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){var n=e[i][1][t];return o(n||t)},l,l.exports,t,e,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)o(a[i]);return o}return t}()({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Script/GameUI"),o=t("./Script/TargetBox"),r=t("./Script/GameControl"),i=function(){function t(){}return t.init=function(){var t=Laya.ClassUtils.regClass;t("Script/GameUI.ts",a["default"]),t("Script/TargetBox.ts",o["default"]),t("Script/GameControl.ts",r["default"])},t.width=640,t.height=1136,t.scaleMode="fixedwidth",t.screenMode="none",t.alignV="top",t.alignH="left",t.startScene="Main.scene",t.sceneRoot="",t.debug=!1,t.stat=!1,t.physicsDebug=!1,t.exportSceneToJson=!0,t}();n["default"]=i,i.init()},{"./Script/GameControl":3,"./Script/GameUI":4,"./Script/TargetBox":5}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("./GameConfig"),o=function(){function t(){window.Laya3D?Laya3D.init(a["default"].width,a["default"].height):Laya.init(a["default"].width,a["default"].height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=a["default"].scaleMode,Laya.stage.screenMode=a["default"].screenMode,Laya.URL.exportSceneToJson=a["default"].exportSceneToJson,(a["default"].debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),a["default"].physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),a["default"].stat&&Laya.Stat.show(),Laya.alertGlobalError=!0,Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}return t.prototype.onVersionLoaded=function(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))},t.prototype.onConfigLoaded=function(){a["default"].startScene&&Laya.Scene.open(a["default"].startScene)},t}();new o},{"./GameConfig":1}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("./GameUI"),o=function(t){function e(){var e=t.call(this)||this;return e.curTargetCount=-1,e.started=!1,e.targetList=new Array,e.hostageList=new Array,e._curAttackIndex=-1,e}return __extends(e,t),Object.defineProperty(e.prototype,"CurAttackIndex",{get:function(){return this._curAttackIndex},set:function(t){if(this._curAttackIndex=t,t>=0){if(this.curTargetCount=this.targetList[t],t>=this.targetCount-1)return void console.log("Attack max Index");t>0&&(a["default"].instance.OnChangeCurTargetGroupBarLayout(this.curTargetCount),a["default"].instance.OnRenderTargetBarSizeEffect()),console.clear();for(var e="curGroup: "+t+" val: ",n=function(t){var n=Math.min(o._curAttackIndex+t,o.targetCount),r=o.targetList[n],i=o.hostageList.some(function(t){return t==n});e+=n+"|"+r+" , ",a["default"].instance.OnChangeTargetGroupBarEffect(t,r,i)},o=this,r=0;3>r;r++)n(r);console.log(e)}},enumerable:!0,configurable:!0}),e.prototype.Init=function(){this.lifeTime=6e6,this.targetCount=100,this.hostageCount=this.RandomInt(9,30);for(var t=0;t<this.targetCount;t++)this.targetList[t]=this.RandomInt(1,3);this.CurAttackIndex=0,this._startTime=Date.now()},e.prototype.RandomInt=function(t,e){return t+Math.floor(Math.random()*(e-t))},e.prototype.onUpdate=function(){a["default"].instance.isSuccess&&this.started},e.prototype.OnTimeUpdate=function(){a["default"].instance.OnTimeUpdate(Date.now()-this._startTime)},e.prototype.createBox=function(){},e.prototype.startGame=function(){this.started=!0,this.Init()},e.prototype.stopGame=function(){},e.default_style="comp/img_bg3.png",e.hostage_style="comp/label.png",e}(Laya.Script);n["default"]=o},{"./GameUI":4}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("./GameControl"),o=t("./TargetBox"),r=Laya.Scene,i=Laya.Ease,s=function(t){function e(){var n=t.call(this)||this;return n.isSuccess=!0,n.lock=!1,n.targetBoxArray=new Array(4),n._targetQueueList=new Array,n._readgoStrArray=["Read","Go!"],n.tmpCount=0,e.instance=n,Laya.MouseManager.multiTouchEnabled=!1,n}return __extends(e,t),e.prototype.onEnable=function(){this._control=this.getComponent(a["default"]),this.Init(),this.startGame()},e.prototype.Init=function(){console.log("====GameUI==== Init"),this.scoreLbl.text="Score: ",this.timeLbl.text="Time:",this._targetPosArray=[250,180,110,110];for(var t=0;4>t;t++){var e=this.targetRoot.getChildAt(t),n=e.getComponent(o["default"]);this.targetBoxArray[t]=n,e.pos(e.x,this._targetPosArray[t]),e.visible=!0,this._targetQueueList.push(t)}this.InitStyle(),this.click1.on(Laya.Event.CLICK,this,this.onLeftClick),this.click2.on(Laya.Event.CLICK,this,this.onRightClick),console.log("====GameUI==== Init end")},e.prototype.InitStyle=function(){for(var t=0;t<this.targetBoxArray.length;t++){var e=this.targetBoxArray[t],n=e.owner;0==t?(n.scale(1,1),n.zOrder=10):1==t?(n.scale(.9,.9),n.zOrder=8):2==t?(n.scale(.8,.8),n.zOrder=6):(n.visible=!1,n.zOrder=4)}},e.prototype.onLeftClick=function(t){this._clickIndex=0,this.OnShoot()},e.prototype.onRightClick=function(t){this._clickIndex=1,this.OnShoot()},e.prototype.OnChangeCurTargetGroupBarLayout=function(t){this.completeIndex=this._targetQueueList[0];var e=this.targetBoxArray[this.completeIndex];e.curCount=t;var n=e.owner;n.visible=!0,Laya.Tween.to(n,{x:n.x,y:-600},100,i.circIn,Laya.Handler.create(this,function(){e.flags[0]=!1,e.flags[1]=!1,e.InitDefaultStyle(),n.zOrder=4,n.visible=!1}),0)},e.prototype.OnRenderTargetBarSizeEffect=function(){this._targetQueueList.splice(0,1),this._targetQueueList[3]=this.completeIndex;for(var t=0;3>t;t++){var e=this._targetQueueList[t],n=this.targetBoxArray[e],a=n.owner;a.visible=!0;var o=1;0==t?(o=1,a.zOrder=10):1==t?(o=.9,a.zOrder=8):2==t&&(o=.8,a.zOrder=6),Laya.Tween.to(a,{scaleX:o,scaleY:o},100,i.cubicInOut,null,60*t),a.y!=this._targetPosArray[t]&&Laya.Tween.to(a,{x:a.x,y:this._targetPosArray[t]},100,i.cubicInOut,null,60*t)}},e.prototype.OnChangeTargetGroupBarEffect=function(t,e,n){var a=this._targetQueueList[t],o=this.targetBoxArray[a],r=o.owner;r.visible=!0,o.curCount=e,-1==o.rangeIndex&&(o.rangeIndex=this._control.RandomInt(0,2));var i=o.rangeIndex;if(n&&-1==o.hostageIndex&&o.InitStartHostageStyle(i),2==e)o.targetBars[0].visible=!0,o.targetBars[1].visible=!0,o.flags[0]=!1,o.flags[1]=!1;else{var s=0==i;o.targetBars[0].visible=s,o.targetBars[1].visible=!s,o.flags[0]=!s,o.flags[1]=s}},e.prototype.OnShoot=function(){if(this.lock)return void(this._clickIndex=0);this.index=this.GetLastItemIndex();var t=this.targetBoxArray[this.index];t.flags[this._clickIndex]?(console.log("==isSuccess false=="),this.isSuccess=!1):(t.flags[this._clickIndex]=!0,t.hostageIndex>-1?t.OnKillHostageEffect():this.OnShootCheck()),this._clickIndex=0},e.prototype.OnShootDelayCall=function(){this.OnShootCheck(),this.lock=!1},e.prototype.OnShootCheck=function(){this.tmpCount++;var t=this.targetBoxArray[this.index];this.tmpCount==t.curCount&&(this._control.CurAttackIndex++,this.tmpCount=0)},e.prototype.GetLastItemIndex=function(){for(var t=0;4>t;t++){var e=this.targetBoxArray[t],n=e.owner;if(10==n.zOrder)return t}return 0},e.prototype.OnTimeUpdate=function(t){var e=Math.floor(t/6e4),n=Math.floor((t-6e4*e)/1e3),a=Math.floor((t-6e4*e-1e3*n)/10);this.timeLbl.text="Time:"+(10>e?"0"+e:e)+":"+(10>n?"0"+n:n)+":"+(10>a?"0"+a:a),t+1e4>this._control.lifeTime&&(this.timeLbl.color="FF0000")},e.prototype.OnStartEffect=function(){},e.prototype.startGame=function(){this._control.startGame()},e.prototype.stopGame=function(){this._control.stopGame()},e}(r);n["default"]=s},{"./GameControl":3,"./TargetBox":5}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("./GameUI"),o=t("./GameControl"),r=function(t){function e(){var e=t.call(this)||this;return e.targetBars=new Array,e.flags=[!1,!1],e.hostageIndex=-1,e.curCount=0,e.rangeIndex=-1,e}return __extends(e,t),e.prototype.onEnable=function(){},e.prototype.onAwake=function(){this.Init()},e.prototype.Init=function(){console.log("==itemObj init =="+this.owner.name),this.item1=this.owner.getChildByName("item1"),this.item2=this.owner.getChildByName("item2"),this.targetBars[0]=this.item1,this.targetBars[1]=this.item2,this.item1.on(Laya.Event.CLICK,this,this.onItem1Click),this.item2.on(Laya.Event.CLICK,this,this.onItem2Click)},e.prototype.createEffect=function(){function t(){e.removeSelf(),Laya.Pool.recover("effect",e)}var e=new Laya.Animation;return e.loadAnimation("test/TestAni.ani"),e.on(Laya.Event.COMPLETE,null,t),e},e.prototype.onItem1Click=function(){this._clickIndex=0,this.OnItemClick()},e.prototype.onItem2Click=function(){this._clickIndex=1,this.OnItemClick()},e.prototype.OnItemClick=function(){this.hostageIndex>=0&&this._clickIndex==this.hostageIndex,this._clickIndex=0},e.prototype.InitStartHostageStyle=function(t){console.log("==InitStartHostageStyle name: "+this.owner.name+" index: "+t),this.hostageIndex=t,this.ChangeStyle(t,o["default"].hostage_style)},e.prototype.ChangeStyle=function(t,e){this.targetBars[t].graphics.clear();var n=Laya.loader.getRes(e);this.targetBars[t].graphics.drawTexture(n,0,0,180,180)},e.prototype.InitDefaultStyle=function(){this.hostageIndex>-1&&this.ChangeStyle(this.hostageIndex,o["default"].default_style),this.hostageIndex=-1},e.prototype.OnStartHostageTargetEffect=function(){},e.prototype.OnKillHostageEffect=function(){a["default"].instance.lock=!0,Laya.timer.once(1e3,this,this.OnKillHostageEffectCallBack,null,!0)},e.prototype.OnKillHostageEffectCallBack=function(){a["default"].instance.OnShootDelayCall()},e.prototype.OnHostageRescueEffect=function(){},e.prototype.onDisable=function(){},e}(Laya.Script);n["default"]=r},{"./GameControl":3,"./GameUI":4}]},{},[2]);